package com.sec.exploits.XStream;

import java.io.*;

/**
 * @program: Gadgets
 * @description:
 * @author: 0range
 * @create: 2021-08-30 20:13
 **/


public class Demo {
    public static void main(String[] args) throws Exception {
        Person p = new Person();
        p.name = "Jack";

        // 序列化
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("demo.ser"));
        oos.writeObject(p);
        oos.close();

        //反序列化
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("demo.ser"));
        Demo o = (Demo)ois.readObject();
        ois.close();

    }

    static class Person implements Serializable {
        public String name;
        private void readObject(java.io.ObjectInputStream in) throws Exception{
            in.defaultReadObject();
            Runtime.getRuntime().exec("open /Applications/Calculator.app");
        }
    }
}

